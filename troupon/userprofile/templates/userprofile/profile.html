{% extends "base.html" %}
{% load static%}

{% block main %}

    <section class="row">
        <!-- heading -->
        {% include "snippet_section_heading.html" with title="My Account"  description="Manage account settings and profile information" %}
    </section>
 
    {% if messages %}
        <div class="alert alert-warning alert-dismissible">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            {% for message in messages %}
                {{ message }}
            {% endfor %}
        </div>
    {% endif %}

<div class="settings-page">
    <section class = "row">
    
        <div class="col-md-2" style="padding-top:20px">
            <div style="padding-bottom: 10px">
                <a href = "#" id ="#" class="show-profile">Profile</a><br>
            </div>
            <div style="padding-bottom: 10px">
                <a href="#" class="change-password">Change Password</a><br></div>
            <div>
                <a href = "#">History</a><br>
            </div>
        </div>

        <div class="col-md-6">

            <div class="container profile-detail" id ="profile">
                <p>Email: {{ request.user.email }}</p>
                <p> Username: {{ request.user.username }}</p>

                <p> Firstname: {{ profile.first_name}}</p>
                <p> Lastname:  {{ profile.last_name }} 
                <p> Interest:  {{ profile.interest }} </p>
            </div>

            <div class="password col-xs-12 col-sm-12" id="change-password-section">
                <h1>Change Password</h1>

                <form method="POST" action="/account/changepassword/{{ request.user.username }}">
                    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                    <div class="form-group col-lg-12">
                        <label>Paswword</label>
                        <div class="custom-input-group">
                            <input type="password" name="password1" class="form-control" id="" value="" placeholder="password">
                        </div>
                    </div>

                    <div class="form-group col-lg-12">
                        <label> Confirm Paswword</label>
                        <div class="custom-input-group">
                            <input type="password" name="password2" class="form-control" id="" value="" placeholder="confirm password">
                        </div>
                    </div>

                    <div class="custom-form-group btn-lg col-lg-1">
                        <input type = "submit", value = "Change Password" align="left" class="btn-action" />
                    </div>
                </form>
            </div>
            <div>
                <form action="{% url 'userprofile' username=request.user.username %}" method="POST" id="profile-section"><input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                    <div class="form-group col-lg-12">
                        <label>Province/State <span class="label-asterik">*</span>
                        </label>
                        <div class="custom-input-group">
                            <span class="right-icon"><i class="fa fa-angle-down"></i></span>
                            <select name="user_state" placeholder="Ikeja.Lagos">
                            {% for choice in states.choices %}
                                <option value="{{ choice.0 }}" {% if choice.0 == states.default %}selected{% endif %} >
                                {{ choice.1 }}
                                </option>
                            {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="custom-form-group col-lg-6">
                        <label>First Name</label>
                        <div class="custom-input-group">
                        <input type="text" name="first_name" class="form-control" id="" value="" placeholder="{{ profile.first_name }}">
                        </div>
                    </div>

                    <div class="custom-form-group col-lg-6">
                        <label>Last Name</label>
                        <div class="custom-input-group">
                        <input type="text" name="last_name" class="form-control" id="" value="" placeholder="{{ profile.last_name }}">
                        </div>
                    </div>
                    <hr>
                    <div class="custom-form-group col-lg-12">
                        <label>Interest</label>
                        <div class="custom-input-group">
                        <input type="text" name="interest" class="form-control" id="" value="" placeholder="{{ profile.interest }}">
                        </div>
                    </div><br>            
                    <div class="custom-form-group btn-lg col-lg-1">
                        <input type = "submit", value = "Save Changes" align="left" class="btn-action" />
                    </div>
                </form>
            </div>
        </div>           
    </section>
</div>

    {% block extended_js %}
         <script src="{% static 'js/profile.js' %}"></script>
    {% endblock extended_js %}

{% endblock %}

